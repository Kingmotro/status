@(incident: model.Incident, updates: Seq[model.Update])(implicit request: play.api.mvc.RequestHeader)

@admin("Incident") {

<div class="incident">

    <div class="header">
        <h1>@incident.title</h1>

        @if(!request.session.isEmpty) {
          <p>
              <a href="@routes.Incidents.edit(incident.id.get)">Edit</a> |
              <a href="@routes.Updates.add(incident.id.get)">Post an update</a>
          </p>
        }
    </div>
    <div class="body">
        <p>@incident.status</p>
        <p>@incident.prettyDate</p>
        
        <p>@incident.description</p>
    </div>

    @updates.map { update =>

      <div class="update">
          <h3>@update.title</h3>
          <p>@update.description</p>
          <p>Posted: @update.created</p>
      </div>
    }

</div>

}
